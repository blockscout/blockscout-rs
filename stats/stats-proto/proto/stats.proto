syntax = "proto3";

package blockscout.stats.v1;

option go_package = "github.com/blockscout/blockscout-rs/stats";

service StatsService {
  rpc GetCounters(CountersRequest) returns (Counters);
  rpc GetNewBlocks(ChartRequest) returns (ChartInt);
}

message CountersRequest {}

message PointInt {
  string date = 1;
  uint64 value = 2;
}

message ChartInt { repeated PointInt chart = 1; }

message PointDouble {
  string date = 1;
  double value = 2;
}

message ChartDouble { repeated PointDouble chart = 1; }

message Counters { uint64 total_blocks_all_time = 1; }

enum Precision {
  DAY = 0;
  MONTH = 1;
}

message ChartRequest {
  // Default is first data point
  optional string from = 1;
  // Default is last data point
  optional string to = 2;
  Precision precision = 3;
}
